{% extends "base.html" %}
{% block content %}
  <!-- モーダル -->
  <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">削除確認</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          このブログ投稿を削除しますか？
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">キャンセル</button>
          <form action="{{ url_for('main.delete_post', blog_post_id=post.id )}}" method="post">
            <input type="submit" class="btn btn-danger" value="削除">
          </form>
        </div>
      </div>
    </div>
  </div>


  <header id="page-header">
    <div class="container my-3 bg-light">
      <div class="row">
        <div class="col-md-6 m-auto text-center">
          <h1 class="fst-italic">{{ post.title }}</h1>
          <hr>
          <p>{{ post.date.strftime('%Y/%m/%d') }} : {{ post.author.username }}({{ post.blogcategory.category }})</p>
        </div>
      </div>
    </div>
  </header>

  <!-- ページ明細 -->
  <div class="container my-3">
    <div class="row mb-2">
      <!-- コンテンツ -->
      <div class="col-8">
        <!-- ブログ投稿 -->
        <section class="blog_post">
          <div class="container py-2 bg-light">
            {% if post.featured_image %}
            <div class="mb-3" style="text-align: center;">
              <img src="{{ url_for('static', filename='featured_image/' + post.featured_image) }}" class="img-fluid">
            </div>
            {% endif %}
            <p class="mb-3">{{ post.text|safe }}</p>
          </div>
        </section>

        <!-- メニュー -->
        <section>
          <div class="container">
            <div class="row bg-light my-5">
              <div class="col-10 py-4">
                {% if current_user.is_active %}
                  {% if post.author == current_user %}
                  <a href="{{ url_for('main.update_blog_post', blog_post_id=post.id) }}" class="btn btn-success btn-lg w-25">
                    更新
                  </a>
                  </button>
                  <button type="button" class="btn btn-danger btn-lg w-25" data-bs-toggle="modal" data-bs-target="#exampleModal">
                    削除
                  </button>
                  {% endif %}
                {% endif %}
                <button type="button" class="btn btn-secondary btn-lg w-25" onclick="history.back()">
                  戻る
                </button>
              </div>
          </div>
        </section>
      </div>
      <!-- サイドバー -->
      <div class="col-md-4">
        <div class="position-sticky" style="top: 2rem">
          <!-- 検索欄 -->
          <div class="container-fluid mb-3">
            <form action="#" class="d-flex" method="POST">
              <input type="text" class="form-control me-2" placeholder="検索するテキストを入力">
              <button type="submit" class="btn btn-outline-success">検索</button>
            </form>
          </div>
          <!-- 会社情報 -->
          <div class="p-4 mb-2 bg-light">
            <h4 class="fst-italic">会社情報</h4>
            <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Aspernatur nam recusandae porro quae cumque quidem dolorem cupiditate aliquid quas saepe.</p>
          </div>
          <!-- 最新記事 -->
          <div class="p-4">
            <h4 class="fst-italic">
              Recent Post
              <span class="ms-2 fs-6">最新記事</span>
              <hr>
              <ol class="list-unstyled">
                <li>
                  <a href="#" class="text-decoration-none">
                    <img src="#" class="img-fluid" width="90" height="50">
                    <span class="ms-2">タイトル</span>
                  </a>
                </li>
                <hr>
              </ol>
            </h4>
          </div>
          <!-- カテゴリ一覧 -->
          <div class="p-4">
            <h4 class="fst-italic">
              Category
              <span class="ms-2 fs-6">カテゴリ一覧</span>
              <hr>
              <ol class="list-unstyled">
                <li>
                  <a href="#" class="text-decoration-none">
                    <img src="#" class="img-fluid" width="90" height="50">
                    <span class="ms-2">カテゴリ</span>
                  </a>
                </li>
                <hr>
              </ol>
            </h4>
          </div>
        </div>
      </div>
    </div>
  </div>


{% endblock %}